# A0121828H
###### src/fini/main/MainApp.java
``` java
 */

public class MainApp extends Application {

    private static final String STAGE_TITLE = "Fini";

    // Opacities for Fade Animation
    private static final double OPACITY_FULL = 1.0;
    private static final double OPACITY_ZERO = 0.0;

    // Duration for Fade Animations
    private static final int FADE_DURATION = 1500;

    // Path to relevant files
    private static final String PATH_FINI_LAYOUT = "view/FiniLayout.fxml";
    private static final String PATH_FINI_ICON = "resources/images/icon.png";
    private static final String PATH_WELCOME_FXML = "view/Welcome.fxml";
    private static final String PATH_STYLESHEET = "view/style.css";
    private static final String PATH_LOGFILE = "Logfile.txt";

    /* ***********************************
     * DEFINE VARIABLES
     * ***********************************/ 

    // Global Logger
    public final static Logger finiLogger = Logger.getLogger(MainApp.class.getName());

    private DisplayController displayController;
    private Brain brain;
    private Stage primaryStage;
    private static Scene scene;
    private AnchorPane parent = null;
    private AnchorPane main = null;

    /* ***********************************
     * METHODS
     * ***********************************/ 
    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage stage) {		
        primaryStage = stage;
        setUpPrimaryStage();		
        intialiseLogger();

        fadeOut(parent);

        SequentialTransition seqTransition = new SequentialTransition (new PauseTransition(Duration.millis(1500)));
        seqTransition.setOnFinished(event ->  transitToMainScene());
        seqTransition.play();
    }

    private void intialiseLogger() {
        FileHandler fileHandler;  

        try {  
            fileHandler = new FileHandler(PATH_LOGFILE);  
            finiLogger.addHandler(fileHandler);
            SimpleFormatter formatter = new SimpleFormatter();  
            fileHandler.setFormatter(formatter);  

            // Initial Log Message
            finiLogger.info("Fini Logger Intialised. All is well.");  

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void loadStylesheet() {
        scene.getStylesheets().add(getClass().getResource(PATH_STYLESHEET).toExternalForm());
    }

    private void setUpPrimaryStage() {
        try {
            parent = FXMLLoader.load(getClass().getResource(PATH_WELCOME_FXML));
        } catch (IOException e) {
            e.printStackTrace();
        }
        scene = new Scene(parent);
        loadStylesheet();

        primaryStage.setTitle(STAGE_TITLE);
        primaryStage.getIcons().add(new Image(getClass().getResourceAsStream(PATH_FINI_ICON)));
        primaryStage.setScene(scene);
        primaryStage.setResizable(false);
        primaryStage.show();
    }
    
    /*
     * This method transits Fini from the Welcome Scene to the main display
     * of tasks. It loads the respective FXML and employs a fade transition.
     */
    private void transitToMainScene() {
        try {  
            FXMLLoader loader = new FXMLLoader(getClass().getResource(PATH_FINI_LAYOUT));
            main = (AnchorPane) loader.load();

            Scene scene = new Scene(main);
            scene.getStylesheets().add(getClass().getResource(PATH_STYLESHEET).toExternalForm());

            fadeIn(main);
            primaryStage.setScene(scene);

            displayController = loader.getController();

            primaryStage.show();
            primaryStage.setResizable(false);

            initializeBrain();
        } catch (IOException exception) {
            finiLogger.severe("Unable to find or load FXML file");
            exception.printStackTrace();
        }
    }

    private void fadeOut(Node element) {
        FadeTransition fadeOut = new FadeTransition(Duration.millis(FADE_DURATION), element);
        fadeOut.setFromValue(1.0);
        fadeOut.setToValue(0.0);
        fadeOut.play();
    }

    private void fadeIn(Node element) {
        FadeTransition fadeIn = new FadeTransition(Duration.millis(FADE_DURATION), element);
        fadeIn.setFromValue(OPACITY_ZERO);
        fadeIn.setToValue(OPACITY_FULL);
        fadeIn.play();
    }
    
```
###### src/fini/main/tests/ParserTest.java
``` java
public class ParserTest {
	private FiniParser parser = FiniParser.getInstance();

	@Test
	public void testNotParsed() {
	    String userInput = "eat          curry  chicken";
	    parser.parse(userInput);
	    assertEquals("eat curry chicken", parser.getNotParsed());
	}
	
	@Test
	public void testClean() {
		String userInput = "eat curry chicken tomorrow morning with gaieepo priority high project funny";
		parser.parse(userInput);
		assertEquals("Clean parameters with date info", "eat curry chicken tomorrow morning with gaieepo", parser.getCleanParameters());
	}

	@Test
    public void testAddFloatingTaskWithPriorityAndProject() {
        String userInput = "eat project gai curry priority high chicken";
        
        assertEquals("Parse return message", "FiniParser.parse SUCCESS", parser.parse(userInput));
        assertEquals("Not parsed words", "eat curry chicken", parser.getNotParsed());
        assertEquals("Clean parameters with date info", "eat curry chicken", parser.getCleanParameters());
        
        assertEquals(true, parser.getDatetimes().isEmpty());
        assertEquals(false, parser.getIsRecurring());
        assertEquals(null, parser.getRecursUntil());
        assertEquals("gai", parser.getProjectName());
        assertEquals(Priority.HIGH, parser.getPriority());
        
        userInput = "eat lunch priority wtf";
        parser.parse(userInput);
        assertEquals(Priority.NORMAL, parser.getPriority());
        assertEquals("eat lunch priority wtf", parser.getNotParsed());
        
        userInput = "eat lunch priority";
        parser.parse(userInput);
        assertEquals(Priority.NORMAL, parser.getPriority());
        assertEquals("eat lunch priority", parser.getNotParsed());
	}
	
	@Test
	public void testAddDeadline() {
	    String userInput = "study 3/15/2016";
        assertEquals("FiniParser.parse SUCCESS", parser.parse(userInput));
        assertEquals(1, parser.getDatetimes().size());
        assertEquals(LocalDateTime.of(LocalDate.of(2016, 3, 15), LocalTime.MAX), parser.getDatetimes().get(0));
        assertEquals("study", parser.getNotParsed());
        assertEquals("study 3/15/2016", parser.getCleanParameters());
        assertEquals(Priority.NORMAL, parser.getPriority());
        assertEquals("Inbox", parser.getProjectName());
        assertEquals(false, parser.getIsRecurring());
        assertEquals(null, parser.getRecursUntil());
	}

	@Test
    public void testAddEvent() {
	    String userInput = "meeting from the day after the second thur of dec to christmas";

        assertEquals("FiniParser.parse SUCCESS", parser.parse(userInput));
        assertEquals("meeting", parser.getNotParsed());
        assertEquals("meeting from the day after the second thur of dec to christmas", parser.getCleanParameters());
        assertEquals(Priority.NORMAL, parser.getPriority());
        assertEquals("Inbox", parser.getProjectName());
        assertEquals(2, parser.getDatetimes().size());
        assertEquals(createDate(2015, 12, 11), parser.getDatetimes().get(0).toLocalDate());
        assertEquals(createDate(2015, 12, 25), parser.getDatetimes().get(1).toLocalDate());
        assertEquals(false, parser.getIsRecurring());
        assertEquals(null, parser.getRecursUntil());
    }

```
###### src/fini/main/tests/RobotTest.java
``` java
 */

public class RobotTest
{
	Robot robot = new Robot();

	public static void main(String[] args) throws AWTException
	{
		new RobotTest();
	}

	public RobotTest() throws AWTException
	{
		robot.setAutoDelay(40);
		robot.setAutoWaitForIdle(true);

		robot.delay(4000);
		robot.mouseMove(116, 206);
		rightClick();
		robot.delay(500);
		
		robot.delay(4000);
		robot.mouseMove(226,590);
		robot.delay(500);

		robot.mouseMove(467, 592);
		leftClick();
		robot.delay(500);
		
		robot.mouseMove(839, 428);
		leftClick();
		robot.delay(500);
		
		robot.keyPress(KeyEvent.VK_ENTER);
		
		robot.mouseMove(389, 665);
		leftClick();
		robot.delay(500);
		
		type("add new event today");
		
		robot.delay(50);
		type(KeyEvent.VK_ENTER);
	}
	
```
###### src/fini/main/view/DisplayController.java
``` java
 */

import fini.main.Brain;
import fini.main.MainApp;
import fini.main.model.Task;
import fini.main.model.Task.Priority;
import fini.main.model.Task.Type;
import javafx.animation.FadeTransition;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.scene.Node;
import javafx.scene.control.Label;
import javafx.scene.control.ListView;
import javafx.scene.control.TextField;
import javafx.scene.image.ImageView;
import javafx.scene.input.KeyCode;
import javafx.scene.input.KeyEvent;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.util.Duration;

public class DisplayController {

    /* ***********************************
     * DEFINE CONSTANTS
     * ***********************************/
    // Formats for Date and Time
    private static final String PATTERN_TIME_FORMAT = "HH:mm";
    private static final String PATTERN_DATE_FORMAT = "d MMMM";

    private static final double OPACITY_FULL = 1.0;
    private static final double OPACITY_ZERO = 0.0;

    private static final int DURATION_OF_FADE_IN_ANIMATION = 500;
    private static final int DURATION_OF_FADE_OUT_ANIMATION = 500;

    // Points awarded for the various priorities
    private static final int TASK_COMPLETION_POINTS_DEFAULT_PRIORITY = 10;
    private static final int TASK_COMPLETION_POINTS_LOW_PRIORITY = 10;
    private static final int TASK_COMPLETION_POINTS_MEDIUM_PRIORITY = 20;
    private static final int TASK_COMPLETION_POINTS_HIGH_PRIORITY = 30;

    // Various Categories of tasks
    private static final String CATEGORY_COMPLETE = "Complete";
    private static final String CATEGORY_OTHER_TASKS = "Other tasks";
    private static final String CATEGORY_TOMORROW = "Tomorrow";
    private static final String CATEGORY_TODAY = "Today";
    private static final String CATEGORY_FLOATING = "Floating";
    private static final String CATEGORY_OVERDUE = "Overdue";

    private static final String PROJECT_INBOX = "Inbox";

    // Types of tasks
    private static final String EVENT_TASK = "event";
    private static final String DEADLINE_TASK = "deadline";
    private static final String FLOATING_TASK = "floating";
    private static final String EMPTY_STRING = "";

    // List of help commands displayed to user
    private static final String HELP_FOR_MODS_COMMAND = "mods <FILE_NAME.html>";
    private static final String HELP_FOR_UNCOMPLETE_COMMAND = "uncomplete <TASK_NUMBER>";
    private static final String HELP_FOR_COMPLETE_COMMAND = "complete <TASK_NUMBER>";
    private static final String HELP_FOR_UPDATE_COMMAND = "update <TASK_NUMBER>";
    private static final String HELP_FOR_DELETE_COMMAND = "delete <TASK_NUMBER>";
    private static final String HELP_FOR_ADD_COMMAND = "add <title> <startTime> <endTime>";
    private static final String HELP_FOR_DISPLAY_COMMAND = "display all/main/completed";
    private static final String HELP_FOR_STORAGE_COMMAND = "set <FILE_PATH>";

    // List of commands user enters
    private static final String COMMAND_MODS = "mods";
    private static final String COMMAND_UNCOMPLETE = "uncomplete";
    private static final String COMMAND_COMPLETE = "complete";
    private static final String COMMAND_UPDATE = "update";
    private static final String COMMAND_DELETE = "delete";
    private static final String COMMAND_ADD = "add";
    private static final String COMMAND_SEARCH = "search";
    private static final String COMMAND_DISPLAY = "display";
    private static final String COMMAND_STORAGE = "set";

    // Maximum number of boxes that can be displayed within the height of the stage
    private static final Integer MAX_DISPLAY_BOXES = 11;

    // Shift amount for each PageUp
    private static final Integer SCROLL_INCREMENT = 1;

    private static final int INTIAL_SCROLL_INDEX = 0;
    
    // Patterns in user input
    private static final String PATTERN_UPDATE_WITH_SPACE_AND_TASK_NUM = "update\\s+[0-9]+";
    private static final String PATTERN_ALL_SPACES = "\\s+";

    private static final String USER_INPUT_SEARCH = "search ";

    private static final int NONE = 0;

    /* ***********************************
     * DEFINE VARIABLES
     * ***********************************/
    private DateTimeFormatter dateFormatter = DateTimeFormatter.ofPattern(PATTERN_DATE_FORMAT);
    private DateTimeFormatter timeFormatter = DateTimeFormatter.ofPattern(PATTERN_TIME_FORMAT);

    private Integer scrollIndex = INTIAL_SCROLL_INDEX;

    /* ***********************************
     * FXML FIELDS
     * ***********************************/

    @FXML
    private ListView<HBox> listView;

    @FXML
    private TextField commandBox;

    @FXML
    private ListView<String> projectsOverviewPanel;

    @FXML
    private VBox tasksOverviewPanel;

    @FXML
    private Label displayToUser;

    @FXML
    private Label inboxTasks;

    @FXML
    private Label todayTasks;

    @FXML
    private Label thisWeekTasks;

    @FXML
    private Label totalNumberOfTasks;

    @FXML
    private ImageView helpPanel;

    @FXML
    private Label finiPoints;

    private Brain brain = Brain.getInstance();

    /* ***********************************
     * METHODS
     * ***********************************/ 

    public DisplayController() {
        MainApp.finiLogger.info("DisplayController has been initialised.");
    }

    /*
     * This method handles the various inputs of the user that is entered in the
     * command box of Fini's GUI and acts as a keyboard listener. It then passes 
     * the command to the Brain for it to be executed.
     * 
     * @param event This is a key event that is passed to the method whenever the
     *              user presses any keyboard button.
     */
    @FXML
    public void handleKeyPressEvent(KeyEvent event) throws Exception {
        String userInput = commandBox.getText();
        if (isUserInputEnter(event)) {
            commandBox.clear();
            if(isHelpPanelVisible()) {
                hideHelpPanel();
            }
            executeCommand(userInput);
        } else if (isUserInputSpace(event)) {
            if (isUserInputSearch(userInput)) {
                executeCommand(userInput);
            } else if (Pattern.matches(PATTERN_UPDATE_WITH_SPACE_AND_TASK_NUM, userInput.toLowerCase())) {
                autoCompleteTaskDetails(userInput);
            } else {
                displayRelevantHelpToUser(userInput);
            }      
        } else if (isUserInputDigitKey(event) || isUserInputLetterKey(event)){
            if (doesUserInputStartWithSearch(userInput)) {
                executeCommand(userInput + event.getCode().toString().toLowerCase());
            }
        } else if (isUserInputBackSpace(event)) {
            if (doesUserInputStartWithSearch(userInput)) {
                executeCommand(userInput.substring(0, userInput.length() - 1));
            }
        }

        if(isUserInputPageDown(event)) {
            MainApp.finiLogger.info("Page Down");
            pageDown();
        }

        if(isUserInputPageUp(event)) {
            MainApp.finiLogger.info("Page Up");
            pageUp();
        }   
    }
    
    /*
     * This method passes the user's input to the Brain for
     * it to be executed.
     * 
     *  @params inputToExecute is the input enter by the user
     *          into the commandBox
     */
    private void executeCommand(String inputToExecute) {
        MainApp.finiLogger.info("To be executed by Brain: " + inputToExecute);
        brain.executeCommand(inputToExecute);
    }

    private boolean isUserInputSearch(String userInput) {
        return userInput.toLowerCase().equals(COMMAND_SEARCH);
    }

    private boolean isUserInputSpace(KeyEvent event) {
        return event.getCode() == KeyCode.SPACE;
    }

    private boolean isUserInputEnter(KeyEvent event) {
        return event.getCode() == KeyCode.ENTER;
    }
    
```
###### src/fini/main/view/DisplayController.java
``` java
    private void autoCompleteTaskDetails(String userInput) {
        int updateIndex = Integer.parseInt(userInput.split(PATTERN_ALL_SPACES)[1]);
        if (updateIndex > 0) {
            ObservableList<Task> taskObservableList = brain.getTaskObservableList();
            if (updateIndex < taskObservableList.size() + 1) {
                Task task = taskObservableList.get(updateIndex - 1);
                Task.Type taskType = task.getTaskType();

                commandBox.appendText(" " + task.getTitle());
                switch (taskType) {
                    case DEFAULT:
                        break;
                    case DEADLINE:
                        commandBox.appendText(" ");
                        commandBox.appendText(task.getStartDateTime().toLocalDate().format(dateFormatter) + " " + 
                                task.getStartDateTime().toLocalTime().format(timeFormatter));
                        break;
                    case EVENT:
                        commandBox.appendText(" ");
                        commandBox.appendText(task.getStartDateTime().toLocalDate().format(dateFormatter) + " " +
                                task.getStartDateTime().toLocalTime().format(timeFormatter) + " to " +
                                task.getEndDateTime().toLocalDate().format(dateFormatter) + " " + 
                                task.getEndDateTime().toLocalTime().format(timeFormatter));
                        break;
                }
                commandBox.appendText(" ");
                commandBox.appendText("priority " + task.getPriority() + " project " + task.getProjectName());
                commandBox.end();
            }
        }
    }

    private void pageUp() {
        if(scrollIndex >= SCROLL_INCREMENT) {
            scrollIndex -= SCROLL_INCREMENT;
        } 
        listView.scrollTo(scrollIndex);
        logCurrentScrollIndex();
    }

    private void logCurrentScrollIndex() {
        MainApp.finiLogger.info("Current scroll index: " + scrollIndex);
    }

    private void pageDown() {
        int currentNumOfBoxes = listView.getItems().size();
        int excessBoxes = listView.getItems().size() - MAX_DISPLAY_BOXES;
        if ((currentNumOfBoxes > MAX_DISPLAY_BOXES) && (scrollIndex < excessBoxes)) {
            scrollIndex += SCROLL_INCREMENT;
        } else if (currentNumOfBoxes < MAX_DISPLAY_BOXES) {
            scrollIndex = NONE;
        }
        listView.scrollTo(scrollIndex);
        logCurrentScrollIndex();
    }

    private boolean isHelpPanelVisible() {
        return helpPanel.getOpacity() != OPACITY_ZERO;
    }

    public void updateDisplayToUser(String display) {
        displayToUser.setText(display);
    }

    public Label getDisplayToUser() {
        return displayToUser;
    }

    public Brain getBrain() {
        return brain;
    }

    public void updateTasksOverviewPanel(ObservableList<Task> taskObservableList) {
        Integer tasksInInbox = NONE;
        Integer tasksDueToday = NONE;
        Integer tasksDueThisWeek = NONE;
        Integer totalTasks = taskObservableList.size();

        for (Task task : taskObservableList) {
            if(task.getProjectName().equals(PROJECT_INBOX)) {
                tasksInInbox += 1;
            }

            if(task.isTaskDueToday()) {
                tasksDueToday += 1;
            }

            if(task.isTaskDueWithinSevenDays()) {
                tasksDueThisWeek += 1;
            }
        }

        inboxTasks.setText(Integer.toString(tasksInInbox));
        todayTasks.setText(tasksDueToday.toString());
        thisWeekTasks.setText(tasksDueThisWeek.toString());
        totalNumberOfTasks.setText(totalTasks.toString());
    }

    public void updateProjectsOverviewPanel(ObservableList<String> projectNameList) {
        projectsOverviewPanel.setItems(projectNameList);
    }

    public void updateProjectDisplay(ObservableList<Task> taskObservableList) {
        ObservableList<HBox> displayBoxes = FXCollections.observableArrayList();
        displayBoxes = getUpdatedDisplayBoxes(taskObservableList, displayBoxes);
        setItemsToListView(displayBoxes);
    }

    private void setItemsToListView(ObservableList<HBox> displayBoxes) {
        listView.setItems(displayBoxes);
    }

    private ObservableList<HBox> getUpdatedDisplayBoxes(ObservableList<Task> taskObservableList,
            ObservableList<HBox> displayBoxes) {
        for (Task task : taskObservableList) {

            int taskId = getTaskId(taskObservableList, task);
            String taskStartTime = getTaskStartTime(task);
            String taskEndTime = getTaskEndTime(task);
            String taskStartDate = getTaskStartDateTime(task);
            String taskEndDate = getTaskEndDateTime(task);

            String typeOfTask = EMPTY_STRING;
            if (task.getTaskType() == Type.DEFAULT) {
                typeOfTask = FLOATING_TASK;
            } else if (task.getTaskType() == Type.DEADLINE) {
                typeOfTask = DEADLINE_TASK;
            } else {
                typeOfTask = EVENT_TASK;
            }

            TaskBox newTaskBox = new TaskBox(taskId, 
                    typeOfTask, 
                    task.getTitle(), 
                    taskStartDate,
                    taskEndDate,
                    taskStartTime, 
                    taskEndTime, 
                    task.getPriority(), 
                    task.getProjectName(), 
                    task.isRecurring());

            displayBoxes.add(newTaskBox);
        }
        return displayBoxes;
    }

    private int getTaskId(ObservableList<Task> taskObservableList, Task task) {
        return taskObservableList.indexOf(task) + 1;
    }

    private String getTaskEndDateTime(Task task) {
        return task.getEndDateTime() == null ? null : task.getEndDateTime().toLocalDate().toString();
    }

    private String getTaskStartDateTime(Task task) {
        return task.getStartDateTime() == null ? null : task.getStartDateTime().toLocalDate().toString();
    }

    private String getTaskEndTime(Task task) {
        return task.getEndDateTime() == null ? null : timeFormatter.format(task.getEndDateTime());
    }

    private String getTaskStartTime(Task task) {
        return task.getStartDateTime() == null ? null : timeFormatter.format(task.getStartDateTime());
    }

    public void updateCompletedDisplay(ObservableList<Task> taskObservableList) {
        ObservableList<HBox> displayBoxes = FXCollections.observableArrayList();

        getUpdatedDisplayBoxes(taskObservableList, displayBoxes);
        setItemsToListView(displayBoxes);
    }

    public void updateAllDisplay(ObservableList<Task> taskObservableList) {
        ObservableList<HBox> displayBoxes = FXCollections.observableArrayList();

        boolean overdueAdded = false;
        boolean floatingAdded = false;
        boolean todayAdded = false;
        boolean tomorrowAdded = false;
        boolean othersAdded = false;

        displayBoxes.add(new TaskCategory(CATEGORY_COMPLETE));
        for (Task task : taskObservableList) {
            if (!task.isCompleted() && task.isOverdue() && !overdueAdded) {
                displayBoxes.add(new TaskCategory(CATEGORY_OVERDUE));
                overdueAdded = true;
            } else if (!task.isOverdue() && task.getTaskType() == Type.DEFAULT && !floatingAdded) {
                displayBoxes.add(new TaskCategory(CATEGORY_FLOATING));
                floatingAdded = true;
            } else if (task.getTaskType() != Type.DEFAULT && task.isTaskDueToday() && !todayAdded) {
                displayBoxes.add(new TaskCategory(CATEGORY_TODAY));
                todayAdded = true;
            } else if (!task.isTaskDueToday() && task.isTaskDueTomorrow() && !tomorrowAdded) {
                displayBoxes.add(new TaskCategory(CATEGORY_TOMORROW));
                tomorrowAdded = true;
            } else if (!task.isTaskDueTomorrow() && !othersAdded) {
                displayBoxes.add(new TaskCategory(CATEGORY_OTHER_TASKS));
                othersAdded = true;
            }

            int taskId = getTaskId(taskObservableList, task);
            String taskStartTime = getTaskStartTime(task);
            String taskEndTime = getTaskEndTime(task);
            String taskStartDate = getTaskStartDateTime(task);
            String taskEndDate = getTaskEndDateTime(task);

            String typeOfTask = EMPTY_STRING;
            if (task.getTaskType() == Type.DEFAULT) {
                typeOfTask = FLOATING_TASK;
            } else if (task.getTaskType() == Type.DEADLINE) {
                typeOfTask = DEADLINE_TASK;
            } else {
                typeOfTask = EVENT_TASK;
            }

            TaskBox newTaskBox = new TaskBox(taskId, 
                    typeOfTask, 
                    task.getTitle(), 
                    taskStartDate,
                    taskEndDate,
                    taskStartTime, 
                    taskEndTime, 
                    task.getPriority(), 
                    task.getProjectName(), 
                    task.isRecurring());
            displayBoxes.add(newTaskBox);
        }
        setItemsToListView(displayBoxes);
    }

    public void updateSearchDisplay(ObservableList<Task> taskObservableList) {
        ObservableList<HBox> displayBoxes = FXCollections.observableArrayList();

        getUpdatedDisplayBoxes(taskObservableList, displayBoxes);
        setItemsToListView(displayBoxes);
    }

    public void updateMainDisplay(ObservableList<Task> taskObservableList) {
        ObservableList<HBox> displayBoxes = FXCollections.observableArrayList();

        // All category boxes
        ObservableList<HBox> overdueBoxes = FXCollections.observableArrayList();
        ObservableList<HBox> floatingBoxes = FXCollections.observableArrayList();
        ObservableList<HBox> todayBoxes = FXCollections.observableArrayList();
        ObservableList<HBox> tomorrowBoxes = FXCollections.observableArrayList();
        ObservableList<HBox> otherBoxes = FXCollections.observableArrayList();

        for (Task task : taskObservableList) {
            int taskId = getTaskId(taskObservableList, task);

            String taskTitle = task.getTitle();
            String taskProject = task.getProjectName();
            String taskStartTime = getTaskStartTime(task);
            String taskEndTime = getTaskEndTime(task);
            String taskStartDate = getTaskStartDateTime(task);
            String taskEndDate = getTaskEndDateTime(task);
            String typeOfTask = EMPTY_STRING;

            Priority taskPriority = task.getPriority();

            boolean isDeadline = task.getTaskType() == Type.DEADLINE;
            boolean isEvent = task.getTaskType() == Type.EVENT;
            boolean isFloating = task.getTaskType() == Type.DEFAULT;
            boolean isOverdue = task.isOverdue();

            if (isFloating) {
                typeOfTask = FLOATING_TASK;
            } else if (isDeadline) {
                typeOfTask = DEADLINE_TASK;
            } else {
                assert isEvent == true;
                typeOfTask = EVENT_TASK;
            }

            TaskBox newTaskBox = new TaskBox(taskId, 
                    typeOfTask, 
                    taskTitle, 
                    taskStartDate,
                    taskEndDate,
                    taskStartTime, 
                    taskEndTime, 
                    taskPriority, 
                    taskProject, 
                    task.isRecurring());

            if(isOverdue) {
                overdueBoxes.add(newTaskBox);
            } else {
                assert isOverdue == false;
                
                if(isFloating) {
                    floatingBoxes.add(newTaskBox);
                } else if(task.isTaskDueToday()) {
                    todayBoxes.add(newTaskBox);
                } else if(task.isTaskDueTomorrow()) {
                    tomorrowBoxes.add(newTaskBox);
                } else {
                    otherBoxes.add(newTaskBox);
                }
            }   
        }

        TaskCategory overdueCategory = null;
        TaskCategory floatingCategory = null;
        TaskCategory todayCategory = null;
        TaskCategory tomorrowCategory = null;
        TaskCategory othersCategory = null;

        // Create all category boxes
        try {
            overdueCategory = new TaskCategory(CATEGORY_OVERDUE);
            floatingCategory = new TaskCategory(CATEGORY_FLOATING);
            todayCategory = new TaskCategory(CATEGORY_TODAY);
            tomorrowCategory = new TaskCategory(CATEGORY_TOMORROW);
            othersCategory = new TaskCategory(CATEGORY_OTHER_TASKS);
        } catch (Exception e) {
            e.printStackTrace();
        }

        // Add tasks and category in sequence
        addToDisplayBoxes(displayBoxes, overdueBoxes, floatingBoxes, todayBoxes, tomorrowBoxes,
                otherBoxes, overdueCategory, floatingCategory, todayCategory, tomorrowCategory,
                othersCategory);

        setItemsToListView(displayBoxes);
    }

    private void addToDisplayBoxes(ObservableList<HBox> displayBoxes,
            ObservableList<HBox> overdueBoxes, ObservableList<HBox> floatingBoxes,
            ObservableList<HBox> todayBoxes, ObservableList<HBox> tomorrowBoxes,
            ObservableList<HBox> otherBoxes, TaskCategory overdueCategory,
            TaskCategory floatingCategory, TaskCategory todayCategory,
            TaskCategory tomorrowCategory, TaskCategory othersCategory) {
        displayBoxes.add(overdueCategory);
        displayBoxes.addAll(overdueBoxes);
        displayBoxes.add(floatingCategory);
        displayBoxes.addAll(floatingBoxes);
        displayBoxes.add(todayCategory);
        displayBoxes.addAll(todayBoxes);
        displayBoxes.add(tomorrowCategory);
        displayBoxes.addAll(tomorrowBoxes);
        displayBoxes.add(othersCategory);
        displayBoxes.addAll(otherBoxes);
    }

    public HBox addHBox(int taskId, String typeOfTask, String taskTitle, String taskDate, String taskStartTime,
            String taskEndTime, String taskPriority, String taskProject, boolean isRecurringTask) {
        HBox hbox = new HBox();
        hbox.setSpacing(10);
        Label id = new Label(Integer.toString(taskId));
        Label title = new Label(taskTitle);
        Label date = new Label(taskDate);
        Label startTime = new Label(taskStartTime);
        Label endTime = new Label(taskEndTime);
        Label priority = new Label(taskPriority);
        Label project = new Label(taskProject);
        Label isRecurring = null;

        switch (typeOfTask) {
            case FLOATING_TASK:
                hbox.getChildren().addAll(id, title);
                break;
            case DEADLINE_TASK:
                hbox.getChildren().addAll(id, title, date, startTime);
                break;
            case EVENT_TASK:
                hbox.getChildren().addAll(id, title, date, startTime, endTime);
                break;
            default:
                break;
        }
        if (taskPriority != null) {
            hbox.getChildren().addAll(priority);
        }

        if (taskProject != null) {
            hbox.getChildren().addAll(project);
        }

        if (isRecurringTask) {
            isRecurring = new Label("R");
            hbox.getChildren().addAll(isRecurring);
        }
        return hbox;
    }

    /*
     * This method takes in a list of completed tasks and collates the total
     * number of points the user has achieved and updates the display. Points 
     * are awarded based on the priority of the task. High gives 30 points, 
     * Medium gives 20 points and Low or Default priority gives 10 points.
     * 
     * @param completedTasks    A list of Tasks that are completed
     */
```
###### src/fini/main/view/FiniLayout.fxml
``` fxml
<?import javafx.geometry.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.effect.*?>
<?import javafx.scene.control.*?>
<?import java.lang.*?>
<?import javafx.scene.layout.*?>

<AnchorPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="600.0" prefWidth="820.0" stylesheets="@style.css" xmlns="http://javafx.com/javafx/8.0.40" xmlns:fx="http://javafx.com/fxml/1" fx:controller="fini.main.view.DisplayController">
   <children>
      <VBox layoutX="214.0" layoutY="45.0" prefHeight="500.0" prefWidth="600.0" styleClass="display" AnchorPane.bottomAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" AnchorPane.topAnchor="0.0">
         <children>
            <StackPane prefHeight="600.0" prefWidth="600.0">
               <children>
                  <HBox prefHeight="600.0" prefWidth="200.0">
                     <children>
                        <VBox prefHeight="473.0" prefWidth="214.0">
                           <children>
                              <VBox fx:id="tasksOverviewPanel" prefHeight="200.0" prefWidth="100.0">
                                 <children>
                                    <HBox prefHeight="100.0" prefWidth="200.0">
                                       <children>
                                          <ImageView fitHeight="48.0" fitWidth="25.0" pickOnBounds="true" preserveRatio="true" translateY="10.0">
                                             <image>
                                                <Image url="@../resources/images/inbox.png" />
                                             </image>
                                          </ImageView>
                                          <Label prefHeight="100.0" prefWidth="120.0" text="Inbox">
                                             <padding>
                                                <Insets left="5.0" />
                                             </padding></Label>
                                          <Label fx:id="inboxTasks" prefHeight="45.0" text="Label" />
                                       </children>
                                    </HBox>
                                    <HBox prefHeight="100.0" prefWidth="200.0">
                                       <children>
                                          <ImageView fitHeight="45.0" fitWidth="25.0" pickOnBounds="true" preserveRatio="true" translateY="10.0">
                                             <image>
                                                <Image url="@../resources/images/today.png" />
                                             </image></ImageView>
                                          <Label prefHeight="100.0" prefWidth="120.0" text="Today">
                                             <padding>
                                                <Insets left="5.0" />
                                             </padding></Label>
                                          <Label fx:id="todayTasks" prefHeight="45.0" text="Label" />
                                       </children>
                                    </HBox>
                                    <HBox prefHeight="100.0" prefWidth="200.0">
                                       <children>
                                          <ImageView fitHeight="45.0" fitWidth="25.0" pickOnBounds="true" preserveRatio="true" translateY="10.0">
                                             <image>
                                                <Image url="@../resources/images/calendar.png" />
                                             </image>
                                          </ImageView>
                                          <Label prefHeight="100.0" prefWidth="120.0" text="This Week">
                                             <padding>
                                                <Insets left="5.0" />
                                             </padding></Label>
                                          <Label fx:id="thisWeekTasks" prefHeight="45.0" text="Label" />
                                       </children>
                                    </HBox>
                                    <HBox prefHeight="100.0" prefWidth="200.0">
                                       <children>
                                          <ImageView fitHeight="45.0" fitWidth="25.0" pickOnBounds="true" preserveRatio="true" translateY="10.0">
                                             <image>
                                                <Image url="@../resources/images/stack.png" />
                                             </image></ImageView>
                                          <Label prefHeight="100.0" prefWidth="120.0" text="Total Tasks">
                                             <padding>
                                                <Insets left="5.0" />
                                             </padding></Label>
                                          <Label fx:id="totalNumberOfTasks" prefHeight="45.0" text="Label" />
                                       </children>
                                    </HBox>
                                 </children>
                              </VBox>
                              <ListView id="projectsOverviewPanel" fx:id="projectsOverviewPanel" prefHeight="375.0" prefWidth="200.0" />
                           </children>
                        </VBox>
                        <ListView fx:id="listView" prefHeight="573.0" prefWidth="600.0" />
                     </children>
                  </HBox>
                  <HBox maxHeight="20.0" maxWidth="105.0" prefHeight="20.0" prefWidth="105.0" styleClass="pointsBox" translateY="-10.0" StackPane.alignment="TOP_RIGHT">
                     <children>
                        <Label text="Fini Points:" textFill="WHITE">
                           <padding>
                              <Insets right="5.0" />
                           </padding>
                        </Label>
                        <Label fx:id="finiPoints" text="Label" textFill="WHITE" />
                     </children>
                     <StackPane.margin>
                        <Insets bottom="510.0" left="660.0" right="20.0" />
                     </StackPane.margin>
                     <padding>
                        <Insets left="5.0" />
                     </padding>
                  </HBox>
                  <ImageView fx:id="helpPanel" fitHeight="491.0" fitWidth="589.0" opacity="0.0" pickOnBounds="true" preserveRatio="true">
                     <image>
                        <Image url="@../resources/images/help.png" />
                     </image>
                  </ImageView>
               </children>
            </StackPane>
            <VBox prefHeight="75.0" prefWidth="100.0" styleClass="vBoxDisplay">
               <children>
                  <Label fx:id="displayToUser" alignment="CENTER" prefHeight="17.0" prefWidth="800.0" text="Welcome to Fini!" textAlignment="CENTER" VBox.vgrow="ALWAYS" />
                  <TextField fx:id="commandBox" onKeyPressed="#handleKeyPressEvent" prefHeight="20.0" prefWidth="800.0" promptText="Enter command here:">
                     <effect>
                        <SepiaTone level="0.32" />
                     </effect></TextField>
               </children>
            </VBox>
         </children>
      </VBox>
   </children>
</AnchorPane>
```
###### src/fini/main/view/style.css
``` css
/*
 * :::::::::::::::::::::::::::::::::::
 * LIST OF FONTS					
 * :::::::::::::::::::::::::::::::::::
*/

/*
 @font-face {
	font-family: OpenSans;
	font-weight: 400;
	font-style: normal;
	src: url("./fonts/Open_Sans/OpenSans-Regular.ttf");
}

@font-face {
	font-family: "Open Sans";
	font-weight: 400;
	font-style: italic;
	src: url("./resources/fonts/Open_Sans/OpenSans-Italic.ttf");
}

@font-face {
	font-family: "Open Sans";
	font-weight: 300;
	font-style: normal;
	src: url("./resources/fonts/Open_Sans/OpenSans-Light.ttf");
}

@font-face {
	font-family: "Open Sans";
	font-weight: 700;
	font-style: normal;
	src: url("./resources/fonts/Open_Sans/OpenSans-Bold.ttf");
}

@font-face {
	font-family: "Open Sans";
	font-weight: 800;
	font-style: normal;
	src: url("./resources/fonts/Open_Sans/OpenSans-ExtraBold.ttf");
}

@font-face {
	font-family: "Open Sans";
	font-weight: 600;
	font-style: normal;
	src: url("./resources/fonts/Open_Sans/OpenSans-Semibold.ttf");
} */

/*
 * :::::::::::::::::::::::::::::::::::
 * ROOT LAYOUT					
 * :::::::::::::::::::::::::::::::::::
*/

.root {
	-fx-background-color: white;
	-fx-padding: 10;
}

/*
 * :::::::::::::::::::::::::::::::::::
 * COMMAND BOX					
 * :::::::::::::::::::::::::::::::::::
*/
.vBoxDisplay #commandBox {
	-fx-font-size: 14px;
	-fx-font-family: "Open Sans", sans-serif, serif;
	-fx-text-box-border: navy;
	-fx-focus-color: navy ;
}

.vBoxDisplay #displayToUser {
	-fx-font-size: 14px;
	-fx-font-family: "Open Sans", sans-serif, serif;
}

.pressEnterText {
	-fx-text-box-border: black;
	-fx-border-insets: 1 1 1 5;
	-fx-border-width: 1 1 1 1;
	-fx-border-color: #000;
}

/*
 * :::::::::::::::::::::::::::::::::::
 * MAIN DISPLAY					
 * :::::::::::::::::::::::::::::::::::
*/
.display {
	-fx-border-color: transparent;
}

/*
 * :::::::::::::::::::::::::::::::::::
 * MAIN DISPLAY & ELEMENTS
 * :::::::::::::::::::::::::::::::::::
*/
.inboxBox {
	-fx-padding: 0 5 0 5;	
}

.display #tasksOverviewPanel {
	-fx-font-size: 14px;
	-fx-font-family: "Open Sans", sans-serif, serif;
	-fx-font-weight: lighter;
	-fx-text-box-border: white;
	-fx-text-fill: white;
	-fx-background-color: #FFF0F5;
	-fx-border-color: transparent;
	
	-fx-border-insets: 0 0 0 5;
	-fx-border-width: 0 0.5 0.5 0;
	-fx-border-color: #87CEEB;
}

.display #projectsOverviewPanel {
	-fx-font-size: 14px;
	-fx-font-family: "Open Sans", sans-serif, serif;
	-fx-font-weight: lighter;
	-fx-text-box-border: white;
	-fx-background-color: #FFF0F5;
	-fx-border-color: transparent;

	-fx-border-insets: 0 0 0 5;
	-fx-border-width: 0 0.5 0 0;
	-fx-border-color: #87CEEB;
}

.display #listView {
	-fx-font-size: 14px;
	-fx-font-family: "Open Sans", sans-serif, serif;
	-fx-text-box-border: white;
	-fx-background-color:white;
	-fx-border-color: transparent;
}

.display #displayToUser {
	-fx-font-size: 14px;
	-fx-font-family: "Open Sans", sans-serif, serif;
}

.list-cell {
	-fx-background-color: white;
	-fx-padding: 7 10 7 10;
	-fx-border-insets: 0 0 0 5;
}

.display #projectsOverviewPanel .list-cell {
	-fx-background-color:  #FFF0F5;
}

.list-cell:hover {

}

/* disable select */
.list-cell:selected {
	/*	-fx-background-color: aqua;*/
}

/*
 * :::::::::::::::::::::::::::::::::::
 * TASKBOX (HBOX)					
 * :::::::::::::::::::::::::::::::::::
*/
.taskBox {
	-fx-border-insets: 0 0 0 5;
	-fx-border-width: 0 0 0.25 0;
	-fx-border-color: #318CE7;
/*	-fx-background-color: aqua;*/
}

.taskBox:hover {
	-fx-background-color: aqua;
}

.taskBox #priority {
	-fx-padding: 0 5 0 5;
	-fx-font-family: "Open Sans", sans-serif, serif;
}

.taskBox #index {
	-fx-padding: 0 5 0 5;
	-fx-font-size: 14px;
	-fx-font-family: "Open Sans", sans-serif, serif;
}

.taskBox #title {
	-fx-padding: 0 5 0 5;
	-fx-font-size: 14px;
	-fx-font-family: "Open Sans", sans-serif, serif;
}

.taskBox #recurring {
	-fx-padding: 0 5 0 5;
	-fx-font-size: 12px;
	-fx-font-family: "Open Sans", sans-serif, serif;
}

.taskBox #project {
	-fx-padding: 0 5 0 5;
	-fx-text-fill: white;
	-fx-background-color: navy;
	-fx-border-radius: 10 10 10 10;
	-fx-font-size: 12px;
	-fx-font-family: "Open Sans", sans-serif, serif;
}

.taskBox #startDate {
	-fx-padding: 0 5 0 5;
	-fx-font-size: 10px;
	-fx-font-family: "Open Sans", sans-serif, serif;
}

.taskBox #endDate {
	-fx-padding: 0 5 0 5;
	-fx-font-size: 10px;
	-fx-font-family: "Open Sans", sans-serif, serif;
}

.taskBox #startTime {
	-fx-padding: 0 5 0 5;
	-fx-font-size: 10px;
	-fx-font-family: "Open Sans", sans-serif, serif;
}

.taskBox #endTime {
	-fx-padding: 0 5 0 5;
	-fx-font-size: 10px;
	-fx-font-family: "Open Sans", sans-serif, serif;
}

/*
 * :::::::::::::::::::::::::::::::::::
 * CATEGORY BOXES (OVERDUE ETC.)				
 * :::::::::::::::::::::::::::::::::::
*/
```
###### src/fini/main/view/style.css
``` css
.display .scroll-bar:vertical {
	-fx-background-color: transparent;
}

.display .scroll-bar:vertical .track{
     -fx-background-color: transparent;
}

.display .scroll-bar:vertical .thumb {
    -fx-background-color:derive(cornflowerblue, 50%);
	-fx-background-insets: 2, 2, 2;
	-fx-background-radius: 7em;
}
```
###### src/fini/main/view/TaskBox.java
``` java
 */

public class TaskBox extends HBox {
    private static final double OPACITY_ZERO = 0.0;

    // FXML Components
    @FXML
    private Circle priority;

    @FXML
    private Label index;

    @FXML
    private Label title;

    @FXML
    private ImageView recurring;

    @FXML
    private Label project;

    @FXML
    private Label startDate;

    @FXML
    private Label endDate;

    @FXML
    private Label startTime;

    @FXML
    private Label endTime;

    public TaskBox(int taskId, String typeOfTask, String taskTitle, String taskStartDate, String taskEndDate, String taskStartTime,
            String taskEndTime, Priority taskPriority, String taskProject, boolean isRecurringTask) {

        loadFxml();

        if(taskPriority != null) {
            switch(taskPriority) {
                case HIGH:
                    this.priority.setFill(Color.INDIANRED);
                    break;
                case MEDIUM:
                    this.priority.setFill(Color.DARKORANGE);
                    break;
                case LOW:
                    this.priority.setFill(Color.GOLD);
                    break;
                default:
                    this.priority.setFill(Color.CORNFLOWERBLUE);
                    break;
            }
        }

        if(taskProject != null) {
            this.project.setText(taskProject);
        } else {
            hideLabel(project);
        }

        if(!isRecurringTask) {
            this.recurring.setOpacity(OPACITY_ZERO);
        } 

        if(taskStartDate != null) {
            this.startDate.setText(taskStartDate);
        } else {
            hideLabel(startDate);
        }

        if(taskEndDate != null) {
            this.endDate.setText(taskEndDate);
        } else {
            hideLabel(endDate);
        }

        if(taskStartTime != null) {
            startTime.setText(taskStartTime);
        } else {
            hideLabel(startTime);
        }

        if(taskEndTime != null) {
            endTime.setText(taskEndTime);
        } else {
            if(taskStartTime != null) {
                endTime.setText("-");
            } else {
                hideLabel(endTime);
            }
        }

        this.index.setText(Integer.toString(taskId));
        this.startDate.setText(taskStartDate);
        this.endDate.setText(taskEndDate);
        this.title.setText(taskTitle);
    }

    private void hideLabel(Label label) {
        label.setText("");
        label.setOpacity(OPACITY_ZERO);
    }

    private void loadFxml() {
        try {
            FXMLLoader loader = new FXMLLoader(getClass().getResource("TaskBox.fxml"));
            loader.setRoot(this);
            loader.setController(this);
            loader.load();
        } catch (Exception e) {
            MainApp.finiLogger.severe("TaskBox.fxml is not loaded.");
            e.printStackTrace();
        }
    }
}
```
